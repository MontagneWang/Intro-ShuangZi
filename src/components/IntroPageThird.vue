<script lang="ts" setup>
import { onMounted, ref } from "vue";

let fu = ref<HTMLDivElement | null>(null);
let text = ref<HTMLDivElement | null>(null);
let timeline2 = ref<HTMLDivElement | null>(null);

onMounted(() => {
  document.querySelectorAll(".text .el-card").forEach((item, index) => {
    item.classList.add("hide");
  });
  // åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨è§†çª—å†…
  let observer2 = new IntersectionObserver((entries2) => {
    entries2.forEach(async (entry) => {
      // å…ƒç´ å‡ºç°åœ¨è§†çª—å†…
      if (entry.isIntersecting) {
        // é€šè¿‡åœ¨æ·»åŠ 	animation-delay å®ç°å»¶è¿Ÿï¼Œè€Œä¸æ˜¯ setTimeOutï¼ˆä¼šå­˜åœ¨ç³»ç»Ÿä¸æ€§èƒ½è¯¯å·®ï¼‰
        const delay = (ms: number) =>
          new Promise((resolve) => setTimeout(resolve, ms));

        // äººç‰©åŠ¨ç”» æ˜¾ç¤º
        await delay(500);
        fu.value!.classList.remove("hide");
        fu.value!.classList.add("animate__animated", "animate__fadeIn");
        await delay(300);

        // æ–‡æœ¬æ¡†åŠ¨ç”» å‘å³ç§»åŠ¨
        text.value!.classList.add("textMove");
        await delay(1300);

        // äººç‰©å±æ€§æ–‡æœ¬åŠ¨ç”» å‘ä¸Šæ»‘åŠ¨æ˜¾ç¤º
        document
          .querySelectorAll(".fu .text .el-card")
          .forEach((item, index) => {
            let delayTime = index * 70;
            (item as HTMLElement).style.animationDelay = `${delayTime}ms`;
            item.classList.remove("hide");
            item.classList.add("animate__animated", "animate__flipInX");
          });
        await delay(100);

        // æ˜¾ç¤ºæ—¶é—´çº¿èƒŒæ™¯æ¿
        timeline2.value!.classList.add("fade-in");
        await delay(1000);

        // æ˜¾ç¤ºæ¯é¡¹æ—¶é—´çº¿ è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å»¶è¿Ÿæ—¶é—´ï¼Œè®¾ç½® animation-delay å±æ€§
        document
          .querySelectorAll(".fu .el-timeline-item")
          .forEach((item, index) => {
            const delay = index * 500 + 2000; // è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å»¶è¿Ÿæ—¶é—´
            (item as HTMLElement).style.animationDelay = `${delay}ms`; // è®¾ç½® animation-delay å±æ€§
            item.classList.remove("hide");
            item.classList.add("animate__animated", "animate__fadeInUp");
          });
      }
    });
  });

  observer2.observe(fu.value as HTMLDivElement);
});

let now = new Date();
let year = now.getFullYear();
let age = ref(5005 + year - 2022);
</script>

<template>
  <div class="content fu">
    <div ref="fu" class="character fu hide">
      <img
        alt="èµ·å¤"
        src="https://article.biliimg.com/bfs/article/ce971427853edff10f6c81718ac4ae0ceff0cd41.png@1e_1c.webp"
      />
      <div class="name fu">èµ· <span style="color: #99ff00">å¤</span></div>

      <div ref="text" class="text">
        <el-card
          style="
            margin-bottom: 0.15em;
            background-image: linear-gradient(
              20deg,
              transparent 0%,
              transparent 75%,
              #99ff00aa 100%
            );
            background-size: 100% 75%;
            background-repeat: no-repeat;
          "
          body-style="padding:0.5em;"
          shadow="hover"
        >
          èº«é«˜ï¼š142cm
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          ä½“é‡ï¼š31kg
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          æ€§åˆ«ï¼šç”·
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          å¹´é¾„ï¼š12 <span class="blur">å…¶å®å·²ç»{{ age }}å²äº†</span>
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          ç”Ÿæ—¥ï¼š7æœˆ13æ—¥
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          ä»£è¡¨ç‰©ï¼šç¬›å­
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          ä»£è¡¨è‰²ï¼š<span style="color: #99ff00">â–  #99FF00</span>
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          å£°æºï¼šè¿™æ˜¯ä¸€æ ¹æ‰‹æŒ‡
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          äººè®¾ç”»å¸ˆï¼šideolo/é…¥å¦ƒ
        </el-card>
        <el-card
          style="
            margin-bottom: 0.15em;
            /* font-size: 0.95rem; */
            background-image: linear-gradient(
              20deg,
              #99ff00aa 0%,
              transparent 20%,
              transparent 100%
            );
            background-size: 100% 100%;
            background-repeat: no-repeat;
          "
          body-style="padding:0.5em;"
          shadow="hover"
        >
          å½¢è±¡ï¼šçº¢ç³ï¼Œé»‘å‘å¸¦å¢¨ç»¿æŒ‘æŸ“<br />&emsp;&emsp;&emsp;å·¦ä¾§æœ‰ä¸ªå°éº»èŠ±è¾«<br />&emsp;&emsp;&emsp;å³ä¾§æœ‰ä¸‰è§’è€³é¥°
        </el-card>
      </div>
    </div>
    <div ref="timeline2" class="timeline">
      <el-timeline>
        <el-timeline-item
          icon="mic"
          placement="top"
          timestamp="2020 å¹´ 7 æœˆ 13 æ—¥"
          type="primary"
        >
          åŒå­ä¸‰å‘¨å¹´ï¼Œç”Ÿè´ºæ›²ã€Šä¸æ½æ¸…é£ä¸æœ›æœˆã€‹å‘å¸ƒ
        </el-timeline-item>
        <el-timeline-item
          icon="mic"
          placement="top"
          timestamp="2021 å¹´ 7 æœˆ 13 æ—¥"
          type="primary"
        >
          åŒå­å››å‘¨å¹´ï¼Œç”Ÿè´ºæ›²ã€Šäº¤å½— Comets Meetã€‹å‘å¸ƒ
        </el-timeline-item>
        <el-timeline-item
          icon="Promotion"
          placement="top"
          timestamp="2022 å¹´ 5 æœˆ 1 æ—¥"
          type="success"
        >
          <el-card>
            <h3>ğŸ‰ èµ·æ°åŒå­ ACE å£°åº“å‘å¸ƒ</h3>
            <!--<p>ã€è¦å°†ç­‰å¾…æ¢æˆä»€ä¹ˆã€€æˆ‘æ—©å°±æ•°ä¸æ¸…æ¥šäº†</p>-->
            <!--<p>&emsp;ä½†æ„¿ä½ èµ°å‘æˆ‘é‚£ä¸ªæ—¶åˆ»ã€€ä¸€åˆ‡éƒ½æ²¡æ”¹å˜è¿‡ã€</p>-->
            <p>
              Ace å£°åº“ä¾æ‰˜äº Ace Studio å¹³å°ï¼Œæ‚¨å¯ä»¥åœ¨
              <a
                href="https://ace-studio.timedomain.cn/#download_home"
                target="_blank"
                title="ç‚¹å‡»å‰å¾€å•éŸ³é˜¶å£°åº“ä¸‹è½½åœ°å€"
                >æ­¤å¤„</a
              >
              ä¸‹è½½
            </p>
          </el-card>
        </el-timeline-item>
        <el-timeline-item
          icon="mic"
          placement="top"
          timestamp="2022 å¹´ 7 æœˆ 13 æ—¥"
          type="primary"
        >
          åŒå­äº”å‘¨å¹´ï¼Œç”Ÿè´ºæ›²ã€Šå¦‚æœä»…é è°è¨€å°†æˆ‘çš„ä¸–ç•Œç…§äº®ã€‹å‘å¸ƒ
        </el-timeline-item>
        <el-timeline-item
          icon="Management"
          placement="top"
          timestamp="2022 å¹´ 9 æœˆ 2 æ—¥"
          type="danger"
        >
          èµ·æ°åŒå­è®¾å®šé›†ã€Šä¸‡çµæ¢¦æ­Œã€‹å‘å”®
        </el-timeline-item>
        <el-timeline-item
          icon="mic"
          placement="top"
          timestamp="2023 å¹´ 7 æœˆ 13 æ—¥"
          type="primary"
        >
          èµ·æ°åŒå­å…­å²å•¦ï¼Œç”Ÿè´ºæ›²ã€Šç¥å­ã€‹å‘å¸ƒ
        </el-timeline-item>
      </el-timeline>
    </div>
  </div>
</template>

<style lang="scss" scoped>
// @media screen and (min-width: 1280px) {
// 	.content {
// 		.fu {
// 			left: 3.5vw !important;
// 		}

// 		.name {
// 			font-size: 2.5em !important;
// 			left: 20% !important;
// 		}

// 		.text {
// 			left: 3.5vw !important;
// 			top: -2vh !important;
// 			width: 20vw !important;
// 			font-size: 1.3em !important;
// 		}

// 		.timeline {
// 			.el-timeline {
// 				font-size: 1em !important;
// 				--el-font-size-small: 1em !important;
// 				padding-left: 9%;
// 				--el-timeline-node-size-large: 1em !important;

// 				.el-card {
// 					--el-card-padding: 20px 35px !important;
// 				}
// 			}
// 		}
// 	}
// }
@media screen and (min-width: 1366px) {
  .content {
    .fu {
      left: 3vw !important;
    }

    .name {
      font-size: 2.5em !important;
      left: 20% !important;
    }

    .text {
      top: -1vh !important;
      left: 4.5vw !important;
      width: 20vw !important;
      font-size: 1.4em !important;
    }

    .timeline {
      .el-timeline {
        font-size: 1.1em !important;
        --el-font-size-small: 1em !important;
        padding-left: 9%;
        --el-timeline-node-size-large: 1em !important;

        .el-card {
          --el-card-padding: 20px 35px !important;
        }
      }
    }
  }
}

@media screen and (min-width: 1440px) {
  iframe {
    position: absolute;
    top: 14%;
    right: 2% !important;
  }
  .content {
    .name {
      font-size: 3em !important;
      left: 20% !important;
    }

    .text {
      left: 3vw !important;
      width: 20vw !important;
      font-size: 1.6em !important;
    }

    .timeline {
      .el-timeline {
        font-size: 1.2em !important;
        --el-font-size-small: 1em !important;
        padding-left: 9%;
        --el-timeline-node-size-large: 1em !important;

        .el-card {
          --el-card-padding: 20px 35px !important;
        }
      }
    }
  }
}

@media screen and (min-width: 1536px) {
  .content {
    .name {
      font-size: 3em !important;
      left: 20% !important;
    }

    .text {
      top: 0.5vh !important;
      left: 4.5vw !important;
      width: 20vw !important;
      font-size: 1.6em !important;
    }

    .timeline {
      .el-timeline {
        font-size: 1.3em !important;
        --el-font-size-small: 1em !important;
        padding-left: 9%;
        --el-timeline-node-size-large: 1em !important;

        .el-card {
          --el-card-padding: 20px 35px !important;
        }
      }
    }
  }
}

@media screen and (min-width: 1920px) {
  .content {
    .name {
      font-size: 4em !important;
      left: 20% !important;
    }

    .text {
      left: 4.5vw !important;
      width: 20vw !important;
      font-size: 2.1em !important;
    }

    .timeline {
      .el-timeline {
        font-size: 1.8em !important;
        --el-font-size-small: 1em !important;
        padding-left: 9%;
        --el-timeline-node-size-large: 1em !important;

        .el-card {
          --el-card-padding: 20px 35px !important;
        }
      }
    }
  }
}

@media screen and (min-width: 2560px) {
  .blur {
    filter: blur(7px) !important;
  }
  .content {
    .name {
      font-size: 5.5em !important;
      left: 20% !important;
    }

    .text {
      top: -2vh !important;
      left: 4vw !important;
      width: 21vw !important;
      font-size: 3em !important;
    }

    .timeline {
      .el-timeline {
        font-size: 2.4em !important;
        --el-font-size-small: 1em !important;
        padding-left: 9%;
        --el-timeline-node-size-large: 1em !important;

        .el-card {
          margin: 0 auto !important;
          --el-card-padding: 20px 50px !important;
        }
      }
    }
  }
}

a {
  @include hyperlink(#99ff00,#ff0099);
}

iframe {
  position: absolute;
  bottom: 10%;
  right: 5%;
}

.blur {
  filter: blur(2px);
  transition: all 0.75s;
}

.blur:hover {
  transition: all 0.75s;
  filter: none;
}

.hide {
  opacity: 0;
}

.content {
  height: 100vh;
  position: relative;
  overflow-x: hidden;

  .textMove {
    transition: all 1s;
    opacity: 1 !important;
    transform: translateX(19.5vw) !important;
  }

  .character {
    height: 85vh;
    max-width: 30vw;
    position: absolute;
    bottom: 4vh;
    left: 5.5vw;
    //opacity: 0;

    &.fu {
      transition: all 1s;

      .text {
        position: absolute;
        top: -1vh;
        left: 2.5vw;
        text-align: left;
        font-size: 1.1em;
        //border: #ff0099 2px solid;
        //border-radius: 10px;
        padding: 3%;
        margin-top: 2%;
        opacity: 0;
        width: 72%;
        border-top-right-radius: 10px;
        border-top: 1.5px solid #99ff00;
        border-right: 1.5px solid #99ff00;

        transition: all 1s;
        transition-delay: 500ms;
        .el-card {
          --el-card-bg-color: rgba(0, 0, 0, 0.1) !important;
          border: 1px solid rgba(0, 0, 0, 0.15);
          margin-bottom: 0.25rem !important;
        }
        div {
          margin-bottom: 15px;
        }

        p:first-of-type {
          margin-top: 0;
        }

        p:last-of-type {
          margin-bottom: 0;
        }
      }

      .name {
        position: absolute;
        background-color: rgba(0, 0, 0, 0.25);
        writing-mode: vertical-rl;
        font-size: 2.5em;
        left: 15%;
        top: 2%;
        padding: 12px 7px 18px 8px;
        border: 2px inset rgba(153, 255, 0, 0.5);
        border-radius: 5px;
        z-index: -1;
      }
    }

    img {
      height: 95%;
    }
  }

  .timeline {
    position: absolute;
    top: 15vh;
    right: 10vw;
    height: 80vh;
    width: 40vw;
    margin-top: -5vh;
    background-color: #00000040;
    border-radius: 10px;
    padding: 2.5% 0 0 4.5%;
    box-sizing: border-box;
    overflow-x: hidden;
    overflow-y: hidden;
    text-align: left;
    opacity: 0;
    animation-delay: 1500ms;

    .el-timeline {
      margin-left: -15% !important;
      width: 100%;
    }

    .el-timeline-item__timestamp {
      color: #ff0099 !important;
    }

    .el-timeline {
      --el-timeline-node-size-large: 18px !important;
      --el-text-color-secondary: #fff;
    }

    //
    //.el-timeline-item {
    //	width: 75%;
    //}
  }
}
</style>
