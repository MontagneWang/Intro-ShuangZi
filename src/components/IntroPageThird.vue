<script lang="ts" setup>
import { onMounted, ref } from "vue";

let fu = ref<HTMLDivElement | null>(null);
let text = ref<HTMLDivElement | null>(null);
let timeline2 = ref<HTMLDivElement | null>(null);

onMounted(() => {
  document.querySelectorAll(".text .el-card").forEach((item, index) => {
    item.classList.add("hide");
  });
  // åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨è§†çª—å†…
  let observer2 = new IntersectionObserver((entries2) => {
    entries2.forEach(async (entry) => {
      // å…ƒç´ å‡ºç°åœ¨è§†çª—å†…
      if (entry.isIntersecting) {
        // é€šè¿‡åœ¨æ·»åŠ 	animation-delay å®ç°å»¶è¿Ÿï¼Œè€Œä¸æ˜¯ setTimeOutï¼ˆä¼šå­˜åœ¨ç³»ç»Ÿä¸æ€§èƒ½è¯¯å·®ï¼‰
        const delay = (ms: number) =>
          new Promise((resolve) => setTimeout(resolve, ms));

        // äººç‰©åŠ¨ç”» æ˜¾ç¤º
        await delay(500);
        fu.value!.classList.remove("hide");
        fu.value!.classList.add("animate__animated", "animate__fadeIn");
        await delay(1000);

        // æ–‡æœ¬æ¡†åŠ¨ç”» å‘å³ç§»åŠ¨
        text.value!.classList.add("textMove");
        await delay(1000);

        // äººç‰©å±æ€§æ–‡æœ¬åŠ¨ç”» å‘ä¸Šæ»‘åŠ¨æ˜¾ç¤º
        document
          .querySelectorAll(".fu .text .el-card")
          .forEach((item, index) => {
            let delayTime = index * 70;
            (item as HTMLElement).style.animationDelay = `${delayTime}ms`;
            item.classList.remove("hide");
            item.classList.add("animate__animated", "animate__flipInX");
          });
        await delay(200);

        // æ˜¾ç¤ºæ—¶é—´çº¿èƒŒæ™¯æ¿
        timeline2.value!.classList.add("fade-in");
        await delay(1000);

        // æ˜¾ç¤ºæ¯é¡¹æ—¶é—´çº¿ è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å»¶è¿Ÿæ—¶é—´ï¼Œè®¾ç½® animation-delay å±æ€§
        document
          .querySelectorAll(".fu .el-timeline-item")
          .forEach((item, index) => {
            const delay = index * 500 + 2000; // è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å»¶è¿Ÿæ—¶é—´
            (item as HTMLElement).style.animationDelay = `${delay}ms`; // è®¾ç½® animation-delay å±æ€§
            item.classList.remove("hide");
            item.classList.add("animate__animated", "animate__fadeInUp");
          });
      }
    });
  });

  observer2.observe(fu.value as HTMLDivElement);
});

let now = new Date();
let year = now.getFullYear();
let age = ref(5005 + year - 2022);
</script>

<template>
  <div class="content fu">
    <div class="container">
      <div ref="fu" class="character fu hide">
        <img
          alt="èµ·å¤"
          src="https://article.biliimg.com/bfs/article/ce971427853edff10f6c81718ac4ae0ceff0cd41.png@1e_1c.webp"
        />
        <div class="name fu">èµ· <span style="color: #99ff00">å¤</span></div>
      </div>

      <div ref="text" class="text">
        <el-card
          style="
            margin-bottom: 0.15em;
            background-image: linear-gradient(
              20deg,
              transparent 0%,
              transparent 75%,
              #99ff00aa 100%
            );
            background-size: 100% 75%;
            background-repeat: no-repeat;
          "
          body-style="padding:0.5em;"
          shadow="hover"
        >
          èº«é«˜ï¼š142cm
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          ä½“é‡ï¼š31kg
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          æ€§åˆ«ï¼šç”·
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          å¹´é¾„ï¼š12 <span class="blur">å…¶å®å·²ç»{{ age }}å²äº†</span>
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          ç”Ÿæ—¥ï¼š7æœˆ13æ—¥
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          ä»£è¡¨ç‰©ï¼šç¬›å­
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          ä»£è¡¨è‰²ï¼š<span style="color: #99ff00">â–  #99FF00</span>
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          å£°æºï¼šè¿™æ˜¯ä¸€æ ¹æ‰‹æŒ‡
        </el-card>
        <el-card
          style="margin-bottom: 0.15em"
          body-style="padding:0.5em;"
          shadow="hover"
        >
          äººè®¾ç”»å¸ˆï¼šideolo/é…¥å¦ƒ
        </el-card>
        <el-card
          style="
            margin-bottom: 0.15em;
            /* font-size: 0.95rem; */
            background-image: linear-gradient(
              20deg,
              #99ff00aa 0%,
              transparent 20%,
              transparent 100%
            );
            background-size: 100% 100%;
            background-repeat: no-repeat;
          "
          body-style="padding:0.5em;"
          shadow="hover"
        >
          å½¢è±¡ï¼šçº¢ç³ï¼Œé»‘å‘å¸¦å¢¨ç»¿æŒ‘æŸ“ã€‚å·¦ä¾§æœ‰ä¸ªå°éº»èŠ±è¾«ï¼Œå³ä¾§æœ‰ä¸‰è§’è€³é¥°ã€‚
        </el-card>
      </div>

      <div ref="timeline2" class="timeline">
        <el-timeline>
          <el-timeline-item
            icon="mic"
            placement="top"
            timestamp="2021 å¹´ 7 æœˆ 13 æ—¥"
            type="primary"
          >
            åŒå­å››å‘¨å¹´ï¼Œç”Ÿè´ºæ›²ã€Šäº¤å½— Comets Meetã€‹å‘å¸ƒ
          </el-timeline-item>
          <el-timeline-item
            icon="Promotion"
            placement="top"
            timestamp="2022 å¹´ 5 æœˆ 1 æ—¥"
            type="success"
          >
            <el-card>
              <h3>
                ğŸ‰ èµ·æ°åŒå­ Ace å£°åº“å‘å¸ƒ&emsp;<a
                  href="https://www.bilibili.com/video/BV1wL4y1c7J8"
                  target="_blank"
                  title="ç‚¹å‡»å‰å¾€ B ç«™"
                  >ğŸ§è¯•å¬æ›²</a
                >
              </h3>
              <!--<p>ã€è¦å°†ç­‰å¾…æ¢æˆä»€ä¹ˆã€€æˆ‘æ—©å°±æ•°ä¸æ¸…æ¥šäº†</p>-->
              <!--<p>&emsp;ä½†æ„¿ä½ èµ°å‘æˆ‘é‚£ä¸ªæ—¶åˆ»ã€€ä¸€åˆ‡éƒ½æ²¡æ”¹å˜è¿‡ã€</p>-->
              <p>
                å£°åº“ä¾æ‰˜ Ace Studio å¹³å°ï¼Œæ‚¨å¯ä»¥åœ¨
                <a
                  href="https://ace-studio.timedomain.cn/#download_home"
                  target="_blank"
                  title="ç‚¹å‡»å‰å¾€å•éŸ³é˜¶å£°åº“ä¸‹è½½åœ°å€"
                  >æ­¤å¤„</a
                >
                ä¸‹è½½
              </p>
            </el-card>
          </el-timeline-item>
          <el-timeline-item
            icon="mic"
            placement="top"
            timestamp="2022 å¹´ 7 æœˆ 13 æ—¥"
            type="primary"
          >
            åŒå­äº”å‘¨å¹´ï¼Œã€Šå¦‚æœä»…é è°è¨€å°†æˆ‘çš„ä¸–ç•Œç…§äº®ã€‹å‘å¸ƒ
          </el-timeline-item>
          <el-timeline-item
            icon="Management"
            placement="top"
            timestamp="2022 å¹´ 9 æœˆ 2 æ—¥"
            type="danger"
          >
            è®¾å®šé›†ã€Šä¸‡çµæ¢¦ä¹¦ã€‹å‘å”®ï¼Œæ‚¨å¯åœ¨
            <a
              href="https://gf.bilibili.com/item/detail/1105040028"
              target="_blank"
              title="ç‚¹å‡»å‰å¾€ B ç«™å·¥æˆ¿"
              >æ­¤å¤„</a
            >
            è·å–å°è¯´ç‰ˆ
          </el-timeline-item>
          <el-timeline-item
            icon="mic"
            placement="top"
            timestamp="2023 å¹´ 7 æœˆ 13 æ—¥"
            type="primary"
          >
            èµ·æ°åŒå­å…­å²å•¦ï¼Œç”Ÿè´ºæ›²ã€Šç¥å­ã€‹å‘å¸ƒ
          </el-timeline-item>
          <el-timeline-item
            icon="Promotion"
            placement="top"
            timestamp="ã€Œä½†æ„¿ä½ èµ°å‘æˆ‘é‚£ä¸ªæ—¶åˆ»ï¼Œä¸€åˆ‡éƒ½æ²¡æ”¹å˜è¿‡ã€"
            type="success"
          >
            <!--  -->
          </el-timeline-item>
        </el-timeline>
      </div>
    </div>
  </div>
</template>

<style lang="scss" scoped>
@media screen and (min-width: 1280px) {
  .content {
    .name {
      font-size: 2.5em !important;
      left: 16% !important;
    }
    .text {
      width: 18vw !important;
      font-size: 1rem !important;
    }
    .timeline {
      .el-timeline {
        --el-font-size-small: 1rem !important;
        --el-timeline-node-size-large: 1.2rem !important;
        .el-card {
          font-size: 1rem !important;
          --el-card-padding: 0.5rem 1.3rem !important;
        }
        .el-timeline-item {
          font-size: 1.2rem !important;
        }
      }
    }
  }
}

@media screen and (min-width: 1536px) {
  .content {
    .name {
      font-size: 3rem !important;
      left: 16% !important;
    }

    .text {
      width: 19vw !important;
      font-size: 1.2rem !important;
    }

    .timeline {
      .el-timeline {
        font-size: 1rem !important;
        --el-font-size-small: 1.3rem !important;
        --el-timeline-node-size-large: 1.5rem !important;

        .el-card {
          font-size: 1.1rem !important;
          --el-card-padding: 0.8rem 2rem !important;
        }
        .el-timeline-item {
          font-size: 1.5rem !important;
        }
      }
    }
  }
}

@media screen and (min-width: 1920px) {
  .content {
    .name {
      font-size: 4rem !important;
      left: 17% !important;
      top: 5% !important;
    }
    .text {
      width: 20vw !important;
      font-size: 1.7rem !important;
    }
    .timeline {
      .el-timeline {
        font-size: 1.8rem !important;
        --el-font-size-small: 1.8rem !important;
        --el-timeline-node-size-large: 2rem !important;

        .el-card {
          --el-card-padding: 0.75rem 2.5rem !important;
        }
      }
    }
  }
}

@media screen and (min-width: 2560px) {
  .content {
    .name {
      font-size: 6rem !important;
      left: 17% !important;
      top: 4.5% !important;
    }
    .text {
      margin-left: -13.5% !important;
      width: 18vw !important;
      font-size: 2.3rem !important;
    }
    .timeline {
      .el-timeline {
        font-size: 2.4rem !important;
        --el-font-size-small: 2.4rem !important;
        --el-timeline-node-size-large: 3rem !important;
        .el-card {
          --el-card-padding: 1.75rem 3.5rem !important;
          width: 100% !important;
          font-size: 2.5rem !important;
        }
        .el-timeline-item {
          font-size: 2.5rem !important;
        }
      }
    }
  }
}
a {
  @include hyperlink(#99ff00, #ff0099);
}
.content {
  height: 100vh;
  overflow: hidden;
  .container {
    width: 84vw;
    height: 88vh;
    margin: 6vh auto;
    text-align: left;
    display: flex;
    .character {
      opacity: 0;
      position: relative;
      left: -4.5%;
      .name {
        position: absolute;
        writing-mode: vertical-rl;
        font-size: 2.5em;
        left: 16%;
        top: 4%;
        padding: 12px 7px 18px 8px;
        border: 2px inset rgba(153, 255, 0, 0.7);
        border-radius: 5px;
        background-color: rgba(0, 0, 0, 0.15);
        z-index: -1;
      }
    }
  }
  .text {
    opacity: 0;
    overflow: hidden;

    width: 14.5em;
    max-width: 20vw;

    margin: 4% 1.6% 4.5% -13%;
    padding: 1.5% 1.4%;

    border-top-right-radius: 10px;
    border-top: 1.5px solid #99ff00;
    border-right: 1.5px solid #99ff00;

    transition-delay: 500ms;
    .el-card {
      --el-card-bg-color: rgba(0, 0, 0, 0.1) !important;
      border: 1px solid rgba(0, 0, 0, 0.15);
      margin-bottom: 0.25rem !important;
    }
  }

  .timeline {
    overflow: hidden;
    margin: 2%;
    margin-left: 0;
    flex-grow: 1; // å æ»¡å‰©ä½™ç©ºé—´

    background-color: #00000040;
    border-radius: 10px;
    opacity: 0;
    animation-delay: 1500ms;

    .el-timeline-item__timestamp {
      color: #ff0099 !important;
    }

    .el-timeline {
      width: 92%;
        margin: 3.5% auto;
      --el-text-color-secondary: #fff;
      --el-fill-color-blank: rgba(255, 255, 255, 0.15);
      .el-card {
        width: 92%;
        font-size: 0.9rem;
      }
      .el-timeline-item {
        font-size: 1.1rem;
        --el-text-color-primary: #000;
      }
    }
  }
}
</style>
